# Локации фестиваля, их тэги и направления
[<-- Вернуться назад](https://github.com/Insomnia-IT/Wiki/blob/main/README.md#api)

### ОБЩАЯ ИНФОРМАЦИЯ ВСЕХ СТРАНИЦ API:
Каждый запрос обрамлён в тело ответа:
	
    {
      "done": bool,
      "model": Model,
      "message": string
    }
1) done отвечает за корректность ответа.
True возвращается при 200 коде ответа.
False в случае 400, 401, 404
(примечание. Ошибка так же может быть необрабатываемой. Однако, все обрабатываемые ошибки лежат в нынешем теле).
2) model содержит внутри себя модель ответа. В случае с возвратом массива представляет собой массив. В случае с возвратом единого элемента, конкретно данный элемент.
3) message содержит внутри себя текст ошибки, который нужно отобразить пользователю. Внутренние ошибки логию сам у себя.

Далее будут указаны модели без данного обрамления. Будьте внимательны!

## Локации фестиваля

Основной роут: `/api/locations/`

### Получить информацию о локации
Тип запроса: GET

Роут:
`/api/locations/{id}`

Вовращает:	
	
    {
      "id": int, //id локации
      "name": string, //название локации
      "description": string, //описание локации
      "image": string, //Содержит внутри себя ссылку на изображение для данной локации
      "x": double, //x и y это местоположение объекта на нарисованной карте.
      "y": double,
      "lat": double, //lat и lon координаты для слоя на карте-спутнике.
      "lon": double
    }

Возвращает 404 код в случае когда локация с указнных id не найдена.
### Получить ПОЛНУЮ информацию о локации
Тип запроса: GET
Роут:
`/api/locations/{id}/full`
Вовращает:
	
    {
      "id": int, //id локации
      "name": string, //название локации
      "description": string, //описание локации
      "image": string, //Содержит внутри себя ссылку на изображение для данной локации
      "x": double, //x и y это местоположение объекта на нашей карте.
      "y": double,
      "lat": double, //lat и lon координаты для слоя на карте-спутнике.
      "lon": double,
      "directionId": [int], //Возвращает ID направления которому принадлжеит локация. По ней определяется значок на карте.
      "tags": [int, int], //массив IDs тэгов локации
      "menu": string, //просто текст меню
      "timetable: [TIMETABLE, TIMETABLE], //массив расписаний на каждый день. Вид модели TIMETABLE смотреть внизу страницы.
    }
Возвращает 404 код в случае когда локация с указнных id не найдена.
### Получить информацию обо всех локациях
Тип запроса: GET

Роут:

`/api/locations/all`

Вовращает массив:
	
    [
      {
        "id": int, //id локации
        "name": string, //название локации
        "description": string, //описание локации
        "image": string, //Содержит внутри себя ссылку на логотип для данной локации
        "x": double, //x и y это местоположение объекта на нашей карте.
        "y": double,
        "lat": double, //lat и lon координаты для слоя на карте-спутнике.
        "lon": double
      }
    ]
Возвращает 404 код в случае когда локаций не существует вовсе.
### Получить ПОЛНУЮ информацию обо всех локациях
Тип запроса: GET

Роут:

`/api/locations/all/full`

Вовращает массив:
	
    [
      {
        "id": int, //id локации
        "name": string, //название локации
        "description": string, //описание локации
        "image": string, //Содержит внутри себя ссылку на логотип для данной локации
        "x": double, //x и y это местоположение объекта на нашей карте.
        "y": double,
	"lat": double, //lat и lon координаты для слоя на карте-спутнике.
        "lon": double,
        "directionId": [int], //Возвращает ID направления которому принадлжеит локация. По ней определяется значок на карте.
        "tags": [int, int], //массив IDs тэгов локации
        "menu": string, //просто текст меню
      	"timetable: [TIMETABLE, TIMETABLE], //массив расписаний на каждый день. Вид модели TIMETABLE смотреть внизу страницы.
      }
    ]
Возвращает 404 код в случае когда локаций не существует вовсе.
### Получить информацию о локациях попадающих под фильтрацию
Тип запроса: GET

Роут: `/api/locations/filter`

Параметры запроса:

	
    name: string
    tags: [int] //массив ids тэгов
    пример: /api/Locations/filter?Name=name&Tags=1&Tags=0
    пример если в названии содержатся пробелы: /api/Locations/filter?Name=name1%20name2%20name3&Tags=0&Tags=1`

Вовращает массив:
	
    [
      {
        "id": int, //id локации
        "name": string, //название локации
        "description": string, //описание локации
        "image": string, //Содержит внутри себя ссылку на логотип для данной локации
        "x": double, //x и y это местоположение объекта на нашей карте.
        "y": double,
	"lat": double, //lat и lon координаты для слоя на карте-спутнике.
        "lon": double
      }
    ]
Возвращает 404 код в случае когда нет локаций вовсе, либо нет попадающих под указнный фильтр.
### Получить ПОЛНУЮ информацию о локациях попадающих под фильтрацию
Тип запроса: GET

Роут:

`/api/locations/filter/all`

Параметры запроса:
	
    name: string
    tags: [int] //массив ids тэгов
    пример: /api/Locations/filter/all?Name=name&Tags=1&Tags=0
    пример если в названии содержатся пробелы: /api/Locations/filter/all?Name=name1%20name2%20name3&Tags=0&Tags=1`

Вовращает массив:
	
    [
      {
        "id": int, //id локации
        "name": string, //название локации
        "description": string, //описание локации
        "image": string, //Содержит внутри себя ссылку на изображение для данной локации
        "x": double, //x и y это местоположение объекта на нашей карте.
        "y": double,
	"lat": double, //lat и lon координаты для слоя на карте-спутнике.
        "lon": double,
        "directionId": [int], //Возвращает ID направления которому принадлжеит локация. По ней определяется значок на карте.
        "tags": [int, int], //массив IDs тэгов локации
        "menu": string, //просто текст меню
      	"timetable: [TIMETABLE, TIMETABLE], //массив расписаний на каждый день. Вид модели TIMETABLE смотреть внизу страницы.
      }
    ]
Возвращает 404 код в случае когда нет локаций вовсе, либо нет попадающих под указнный фильтр.
### Создать новую локацию
Тип запроса: POST

Роут: `/api/admin/locations/add`

Тело запроса (Body):	
	
    {
      "name": string, //название локации
      "description": string, //описание локации
      "directionId": int, //Выбрать id направления по которому будет определена картинка локации для карты. Если пустое, = 0 или несуществующему id, будет возвращена стандартная картинка
      "tags": [int,int], //тэги
      "x": double, //x и y это местоположение объекта на нашей карте.
      "y": double,
      "lat": double, //lat и lon координаты для слоя на карте-спутнике.
      "lon": double
    }
Ответ: возвращает 200 код в случае успеха. model = null
### Изменить локацию
Тип запроса: PUT

Роут: `/api/admin/locations/edit`
Тело запроса (Body):
	
    {
      "id": int, //id локации
      "name": string, //название локации
      "description": string, //описание локации
      "directionId": int, //Выбрать id направления по которому будет определена картинка локации для карты. Если пустое, = 0 или несуществующему id, будет возвращена стандартная картинка
      "tags": [int,int], //тэги
      "x": double, //x и y это местоположение объекта на нашей карте.
      "y": double,
      "lat": double, //lat и lon координаты для слоя на карте-спутнике.
      "lon": double
    }

>ПРИМЕЧАНИЕ:
Обязательным параметром является ID локации.
Можно указывать пустыми любые не изменяемые данные. Будут изменены лишь те которые указаны как не пустые.

Ответ:
Возвращает 200 код в случае успеха. model = null
Возвращает 404 код в случае когда локация с указнных id не найдена.
### Удалить локацию
Тип запроса: DELETE

Роут: `/api/admin/locations/delete/{id}`

Необходимо указать id удаляемой локации.

Ответ:

Возвращает 200 код в случае успеха. model = null

Возвращает 404 код в случае когда локация с указнных id не найдена.

## Тэги локаций

Основной роут: `/api/tags/`

### Получить информацию о тэге
Тип запроса: GET

Роут:
`/api/tags/{id}`

Вовращает:	
	
    {
      "id": int, //id тэга
      "name": string, //название тэга
    }

Возвращает 404 код в случае когда тэг с указнным id не найден.
### Получить информацию обо всех тэгах
Тип запроса: GET

Роут:

`/api/tags/all`

Вовращает массив:
	
    [
      {
        "id": int, //id тэга
        "name": string, //название тэга
      }
    ]
Возвращает 404 код в случае когда тэгов не существует вовсе.
### Создать новый тэг
Тип запроса: POST

Роут: `/api/admin/tags/add`

Тело запроса (Body):	
	
    {
      "name": string, //название тэга
    }
Ответ: возвращает 200 код в случае успеха. model = null
### Изменить тэг
Тип запроса: PUT

Роут: `/api/admin/tags/edit`
Тело запроса (Body):
	
    {
      "id": int, //id тэга
      "name": string, //название тэга
    }

>ПРИМЕЧАНИЕ:
Обязательным параметром являются оба параметра. Т.к. у тэга менять возможно только название.

Ответ:
Возвращает 200 код в случае успеха. model = null
Возвращает 404 код в случае когда локация с указнных id не найдена.
### Удалить тэг
Тип запроса: DELETE

Роут: `/api/admin/tags/delete/{id}`

Необходимо указать id удаляемого тэга.

Ответ:

Возвращает 200 код в случае успеха. model = null

Возвращает 404 код в случае когда тэга с указнным id не найдено.
## Направления локаций

Основной роут: `/api/directions/`

### Получить информацию о направлении
Тип запроса: GET

Роут:
`/api/directions/{id}`

Вовращает:	
	
    {
      "id": int, //id направления
      "name": string, //название направления
      "image": string //URL на изображение логотипа. Сделал специально отдельным изображением т.к. 1) можно просто в создании/изменении вставить ссылку, а не загружать. 2) чтоб при каждом запросе не сыпало вас файлами. Можно просто закэшировать и если надо обращаться по ссылке за лого. Только проверчйте, что ссылка всё ещё та же!
    }

Возвращает 404 код в случае когда направление с указнным id не найдено.
### Получить информацию обо всех направлениях
Тип запроса: GET

Роут:

`/api/directions/all`

Вовращает массив:
	
    [
      {
        "id": int, //id направления
        "name": string, //название направления
	"image": string //URL на изображение логотипа. Сделал специально отдельным изображением т.к. 1) можно просто в создании/изменении вставить ссылку, а не загружать. 2) чтоб при каждом запросе не сыпало вас файлами. Можно просто закэшировать и если надо обращаться по ссылке за лого. Только проверчйте, что ссылка всё ещё та же!
      }
    ]
Возвращает 404 код в случае когда направления не существует вовсе.
### Создать новое направление
Тип запроса: POST

Роут: `/api/admin/directions/add`

ВНИМАНИЕ!! ТИП ПАРАМЕТРОВ ЗАПРОСА FromForm!!!:	
Тело запроса (FromForm):
    
      "name": string, //название тэга
      "file": byte[], //файл логотипа
      "image": string //ссылка на изображение логотипа. Внимание! Если загружен и файл, и ссылка, файл загружен не будет! Приоритет стоит на ссылке!!!
    
Ответ: возвращает 200 код в случае успеха. model = null
### Изменить направление
Тип запроса: PUT

Роут: `/api/admin/directions/edit`

ВНИМАНИЕ!! ТИП ПАРАМЕТРОВ ЗАПРОСА FromForm!!!:	
Тело запроса (FromForm):
    
      "id": int, //id тэга
      "name": string, //название тэга
      "file": byte[], //файл логотипа
      "image": string //ссылка на изображение логотипа. Внимание! Если загружен и файл, и ссылка, файл загружен не будет! Приоритет стоит на ссылке!!!

>ПРИМЕЧАНИЕ:
Обязательным параметром является ID направления.
Можно указывать пустыми любые не изменяемые данные. Будут изменены лишь те которые указаны как не пустые.

Ответ:
Возвращает 200 код в случае успеха. model = null
Возвращает 404 код в случае когда направление с указнным id не найдено.
### Удалить направление
Тип запроса: DELETE

Роут: `/api/admin/directions/delete/{id}`

Необходимо указать id удаляемого направления.

Ответ:

Возвращает 200 код в случае успеха. model = null

Возвращает 404 код в случае когда направления с указнным id не найдено.


## Расписание

Расписание указано на отдельной старнице, как и модели по ним [--> ЗДЕСЬ <--]([https://github.com/Insomnia-IT/Wiki/blob/main/intronet-backend/timetable.md](https://github.com/Insomnia-IT/Wiki/blob/main/intronet-backend/timetable.md#%D1%80%D0%B0%D1%81%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BB%D0%BE%D0%BA%D0%B0%D1%86%D0%B8%D0%B9))

# Расписание локаций и анимаций
[<-- Вернуться назад](https://github.com/Insomnia-IT/Wiki/blob/main/README.md#api)

### ОБЩАЯ ИНФОРМАЦИЯ ВСЕХ СТРАНИЦ API:
Каждый запрос обрамлён в тело ответа:
	
    {
      "done": bool,
      "model": Model,
      "message": string
    }
1) done отвечает за корректность ответа.
True возвращается при 200 коде ответа.
False в случае 400, 401, 404
(примечание. Ошибка так же может быть необрабатываемой. Однако, все обрабатываемые ошибки лежат в нынешем теле).
2) model содержит внутри себя модель ответа. В случае с возвратом массива представляет собой массив. В случае с возвратом единого элемента, конкретно данный элемент.
3) message содержит внутри себя текст ошибки, который нужно отобразить пользователю. Внутренние ошибки логию сам у себя.

Далее будут указаны модели без данного обрамления. Будьте внимательны!


## Расписание локаций

### !!! ДИСКЛЕМЕР !!!
Прошу быть внимательным. Здесь используется нестандартный подход.

## Модель получаемого в результате GET-запросов расписание

### Модель расписания (указано в документе как TIMETABLE)

    {
      "Id": int, //Id расписания
      "LocationId": int, //Id локации
      "Day": string, //День. Список дней смотреть ниже. Но, если честно, это просто четверг-воскресенье на английском языке.
      "AuditoryElements": [AUDITORY, AUDITORY], //Массив аудиторий. Почти у всех он будет = 1. Однако, есть где больше.
    }

### Модель аудитории (указано в документе как AUDITORY)

    {
      "Id": int, //Id аудитории
      "Number": int, //Номер аудитории. При единственной аудитории = 1.
      "Elements": [ELEMENTTABLE, ELEMENTTABLE], //Массив пунктов расписания для данной аудитории в конкретный день.
    }

### Модель элемента расписания (указано в документе как ELEMENTTABLE)

    {
      "Id": int, //Элемента расписания
      "Name": string, //Название пункта расписания.
      "Description": string, //Описание мастер-класса или лекции. (ЕСЛИ ЧЕСТНО, БУДЕТ РЕДКО КЕМ НАПИСАНО. Возможно, суну сюда генерируемое что-нить аля доп поля)
      "Time": string, //Время начала.
      "Speaker": string, //Лектор или ведущий мастер класса, или учёный, или вообще кто угодно.
      "IsCanceled": bool, //Если = true, значит отменено.
      "Changes": string, //Изменения в расписании по данному пункту.
    }
    
## Модель расписания для POST-запросов

### Модель расписания (указано в документе как EDIT_TIMETABLE)

    {
      "Id": int, //Id расписания
      "LocationId": int, //Id локации
      "Day": string, //День. Список дней смотреть ниже. Но, если честно, это просто четверг-воскресенье на английском языке.
      "AuditoryElements": [EDIT_AUDITORY, EDIT_AUDITORY], //Массив аудиторий. Почти у всех он будет = 1. Однако, есть где больше.
    }

### Модель аудитории (указано в документе как EDIT_AUDITORY)

    {
      "Id": int, //Id аудитории
      "Number": int, //Номер аудитории. При единственной аудитории = 1.
      "Elements": [ELEMENTTABLE, ELEMENTTABLE], //Массив пунктов расписания для данной аудитории в конкретный день.
    }

### Модель элемента расписания (указано в документе как EDIT_ELEMENTTABLE)

    {
      "Id": int, //Элемента расписания
      "Name": string, //Название пункта расписания.
      "Description": string, //Описание мастер-класса или лекции. (ЕСЛИ ЧЕСТНО, БУДЕТ РЕДКО КЕМ НАПИСАНО. Возможно, суну сюда генерируемое что-нить аля доп поля)
      "Time": string, //Время начала.
      "Speaker": string, //Лектор или ведущий мастер класса, или учёный, или вообще кто угодно.
      "IsCanceled": bool, //Если = true, значит отменено.
      "IsDeleted": bool, //Если = true, запись будет удалена!
    }
    
## Запросы для расписания локации

Основной роут: `/api/locations/`

### Получить информацию о локации
Тип запроса: GET

Роут:
`/api/schedule/{locationId}`
В качестве locationId используется ID локации

Вовращает:	
	[TIMETABLE, TIMETABLE] //Массив расписаний. Может быть несколько расписаний с одинаковым днём. Для группировки использовать номера аудиторий.
    
### Создать или изменить расписание
Тип запроса: POST

Роут:
`/api/Admin/locations/schedule/add-or-edit`

Тело запроса (Body):

	[EDIT_TIMETABLE, EDIT_TIMETABLE]
    
Примечание:
> Если расписание, аудитория или элемент только создаются, а не меняются, указывать Id = 0 !

Особенности:

1) При любом запросе на изменение необходимо отправить обратно всю коллекцию аудиторий и элементов.
2) Если какой-то элемент не будет указан, он будет помечен как отменённый (НЕ УДАЛЁННЫЙ!)
3) Если требуется отменить пункт в расписании, необходимо у данного элемента выставить IsCanseled = true. В любом другом случае он дефолтом ставится на false.
4) Нельзя указать отменённый пункт при создании. Можно лишь при последующем изменении, уже с польчением ID
5) Необходимо указывать ВСЕ ID. Т.е. ID и расписания, и локации, и аудиторий, и элементов.
6) Для новых элементов необходимо указать ID = 0. Как у расписаний, так и аудиторий, и элементов. Id локации обязан быть указан всегда.
7) Если необходимо не отменить, а именно удалить пункт или аудиторию, необходимо выставить IsDeleted = true. Только в этом случае элемент действительно будет удалён из БД.


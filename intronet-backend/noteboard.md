# Доска объявлений
[<-- Вернуться назад](https://github.com/Insomnia-IT/Wiki/blob/main/README.md#api)

### ОБЩАЯ ИНФОРМАЦИЯ ВСЕХ СТРАНИЦ API:
Каждый запрос обрамлён в тело ответа:
	
    {
      "done": bool,
      "model": Model,
      "message": string
    }
1) done отвечает за корректность ответа.
True возвращается при 200 коде ответа.
False в случае 400, 401, 404
(примечание. Ошибка так же может быть необрабатываемой. Однако, все обрабатываемые ошибки лежат в нынешем теле).
2) model содержит внутри себя модель ответа. В случае с возвратом массива представляет собой массив. В случае с возвратом единого элемента, конкретно данный элемент.
3) message содержит внутри себя текст ошибки, который нужно отобразить пользователю. Внутренние ошибки логию сам у себя.

Далее будут указаны модели без данного обрамления. Будьте внимательны!

## Методы записей

Основной роут: `/api/notes/`

### Получить информацию о отдельной записи
Тип запроса: GET

Роут:
`/api/notes/{id}`

Вовращает:	
	
    {
      "id": int, //id записи
      "title": string, //название записи
      "text": string, //основной текст записи
      "categoryId": int //Id категории. Если Id = 1 - это общая категория, просто добавляйте в общий список, отдельная колонка не требуется.
    }

Возвращает 404 код в случае когда запись с указанным id не найдена.
### Получить информацию обо всех записях
Тип запроса: GET

Роут:

`/api/notes/all`

Вовращает массив:
	
    [
      {
        "id": int, //id записи
        "title": string, //название записи
        "text": string, //основной текст записи
	"categoryId": int, //Id категории. Если Id = 1 - это общая категория, просто добавляйте в общий список, отдельная колонка не требуется.
      }
    ]
Возвращает 404 код в случае когда записи не существует вовсе.
### Получить информацию о локациях попадающих под фильтрацию
Тип запроса: GET

Роут: `/api/notes/filter`

Параметры запроса:

	
    Page: int //Сколько раз Count пропустить для вывода списка (т.е. count*(page+1)+1 = первая запись). По умолчанию выведутся самые первые элементы
    Count: int //Сколько записей прислать в ответ. По умолчанию 20 штук
    IsSmartFilter: bool //Если = true, будет применена функция "умного фильтра". При которой будет возвращено до 20 элементов каждой категории (если не указана фильтрация по конкретным категориям. в таком случае вернутся только они. Помните, что записи, которые изначально были созданы без категории, находятся в категории ID = 1)
    CategoriesIds: [int,int] //Массив IDs категорий, которые должны быть получены в ответ. Помните, что записи, которые изначально были созданы без категории, находятся в категории ID = 1
    пример: /api/notes/filter?Page=0&Count=20

Вовращает массив:
	
    [
      {
        "id": int, //id записи
        "title": string, //название записи
        "text": string, //основной текст записи
	"categoryId": int, //Id категории. null, если не принадлежит никакой категории вовсе.
      }
    ]
>ПРИМЕЧАНИЕ: Можно не указывать параметры вовсе. При значения <=0 присваиваются базовые значения. Первая страница и 20 элементов. Сортировка ВСЕГДА наверху самые новые.
Возвращает 404 код в случае когда нет локаций вовсе, либо нет попадающих под указнный фильтр.
### Создать новую запись
Тип запроса: POST

Роут: `/api/admin/notes/add`

Тело запроса (Body):	
	
    {
      "title": string, //название записи. Верхняя строка в отображении. Например: ОТКРЫТО НОВОЕ КАФЕ
      "text": string, //основной текст записи. Например: У ДЕТСКОГО ЛАГЕРЯ ОТКРЫЛОСЬ НОВОЕ КАФЕ "ВОСТОРГ". ВАС ЖДУТ ВКУСНЫЕ ПИРОЖКИ И МЕДОВУХА.
      "categoryId": int, //Id категории. null, если не принадлежит никакой категории вовсе. Элементы без категории попадают в дефолтную категорию с ID = 1 = "Все"
    }
Ответ: возвращает 200 код в случае успеха. model = null
### Изменить запись
Тип запроса: PUT

Роут: `/api/admin/notes/edit`
Тело запроса (Body):
	
    {
      "id": int, //id записи
      "title": string, //название записи
      "text": string, //основной текст записи
      "categoryId": int, //Id категории. null, если не принадлежит никакой категории вовсе. Элементы без категории попадают в дефолтную категорию с ID = 1 = "Все"
    }

>ПРИМЕЧАНИЕ:
Обязательным параметром является ID записи.
Можно указывать пустыми любые не изменяемые данные. Будут изменены лишь те которые указаны как не пустые.

Ответ:
Возвращает 200 код в случае успеха. model = null
Возвращает 404 код в случае когда запись с указнным id не найдена.
### Удалить запись
Тип запроса: DELETE
Роут: `/api/admin/notes/delete/{id}`

Необходимо указать id удаляемой записи.

Ответ:

Возвращает 200 код в случае успеха. model = null

Возвращает 404 код в случае когда запись с указнным id не найдена.

## Методы категорий записей

Основной роут: `/api/notes/category` или  `/api/notes/categories`

### Получить информацию об отдельной категории
Тип запроса: GET

Роут:
`/api/notes/category/{id}`

Вовращает:	
	
    {
      "id": int, //id категории
      "name": string, //название категории
      "count": int, //количество элементов которым присвоена данная категория.
    }
>ПРИМЕЧАНИЕ:
Если хочется получить элементы без категории, укажите ID = 1.

Возвращает 404 код в случае когда категория с указанным id не найдена.
### Получить информацию обо всех категориях
Тип запроса: GET

Роут:

`/api/notes/all`

Вовращает массив:
	
    [
      {
        "id": int, //id записи
        "name": string, //название категории
        "count": string, //количество элементов которым присвоена данная категория
      }
    ]
>ПРИМЕЧАНИЕ:
Если хочется получить полное количество всех элементов, суммируйте просто все.
Элементы без категории попадают в категорию с ID = 1.

Возвращает 404 код в случае когда категории не существует вовсе.
### Создать новую категорию
Тип запроса: POST

Роут: `/api/admin/notes/categories/add`

Тело запроса (Body):	
	
    {
      "name": string, //название категории
    }
Ответ: возвращает 200 код в случае успеха. model = null
### Изменить категорию
Тип запроса: PUT

Роут: `/api/admin/notes/categories/edit`
Тело запроса (Body):
	
    {
      "id": int, //id категории
      "name": string, //название категории
    }

>ПРИМЕЧАНИЕ:
Обязательным параметром являются оба параметра. Т.к. в категории менять возможно только название.

Ответ:
Возвращает 200 код в случае успеха. model = null
Возвращает 404 код в случае когда категория с указнным id не найдена.
### Удалить категорию
Тип запроса: DELETE
Роут: `/api/admin/notes/categories/delete/{id}`

Необходимо указать id удаляемой категории.

Ответ:

Возвращает 200 код в случае успеха. model = null

Возвращает 404 код в случае когда категория с указнным id не найдена.

### ???

ОБНОВЛЯЕТСЯ...



